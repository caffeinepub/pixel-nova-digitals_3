{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-14T14:37:56.815Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 3,
    "implemented": 2,
    "items": [
      {
        "id": "REQ-68",
        "summary": "Stop the Admin Login redirect loop by ensuring the frontend does not clear the stored admin session token due to non-auth or ambiguous errors during admin data fetching (orders list, order detail, download file, delete order). Only clear the local session when the backend explicitly indicates the token is invalid/expired via the token-based endpoints.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/utils/adminTokenError.ts",
          "frontend/src/hooks/useQueries.ts",
          "frontend/src/utils/userFacingError.ts"
        ],
        "matchedFiles": [
          "frontend/src/utils/adminTokenError.ts",
          "frontend/src/hooks/useQueries.ts",
          "frontend/src/utils/userFacingError.ts"
        ]
      },
      {
        "id": "REQ-69",
        "summary": "Make backend token-authenticated admin endpoints return a consistent, explicit, non-trapping error for invalid/expired tokens so the frontend can reliably detect when to clear the session (and otherwise keep the session). Apply this consistency to: getAllOrdersWithToken, getOrderDetailWithToken, downloadFileWithToken, and deleteOrderWithToken.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-70",
        "summary": "Ensure the AdminGate flow remains stable immediately after login: once a token is stored in sessionStorage, AdminGate must treat the user as authenticated and must not revert to the login screen due to background queries unless the backend explicitly rejects the token as invalid/expired.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/admin/AdminGate.tsx",
          "frontend/src/components/admin/OrdersAdmin.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/admin/AdminGate.tsx",
          "frontend/src/components/admin/OrdersAdmin.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/components/admin/AdminGate.tsx",
    "frontend/src/components/admin/OrdersAdmin.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/utils/adminTokenError.ts",
    "frontend/src/utils/userFacingError.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}